let visiblePosts = posts.filter(post =>
  post.parentId === null &&
  (filter === "ã™ã¹ã¦" || post.genre === filter) &&
  (isAdmin || !post.reported) &&
  (post.content.toLowerCase().includes(query) || post.username.toLowerCase().includes(query))
);
post.replies.forEach(reply => {
  if (!reply.reported || isAdmin) {
    const replyDiv = createPostElement(reply, depth + 1);
    div.appendChild(replyDiv);
  }
});
post.replies.forEach(reply => {
  if (!reply.reported || isAdmin) {
    const replyDiv = createPostElement(reply, depth + 1);
    div.appendChild(replyDiv);
  }
});
function loginAdmin() {
  const pw = document.getElementById("adminPassword").value;
  if (pw === ADMIN_PASSWORD) {
    isAdmin = true;
    alert("ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸ");
    renderPosts();  // âœ… é€šå ±æ¸ˆã¿æŠ•ç¨¿ã‚’å†æç”»
  } else {
    alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
  }
}

function talkToBot() {
  const input = document.getElementById("bot-input").value.toLowerCase();
  const message = document.getElementById("bot-message");

  if (input.includes("ç–²") || input.includes("ã¤ã‹ã‚Œ")) {
    message.textContent = "ã‚ˆã—ã‚ˆã—â€¦ã©ã‚“ãã‚Šã‚ã’ã‚‹ã­ğŸŒ°";
  } else if (input.includes("ã“ã‚“ã«ã¡ã¯")) {
    message.textContent = "ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯æ£®ã‚‚å…ƒæ°—ã ã‚ˆğŸŒ³";
  } else if (input.includes("ã•ã¿ã—ã„")) {
    message.textContent = "ãƒªã‚¹ãã‚“ãŒãã°ã«ã„ã‚‹ã‚ˆğŸ¿ï¸";
  } else {
    message.textContent = "ã†ãƒ¼ã‚“ï¼Ÿã‚€ãšã‹ã—ã„è¨€è‘‰ã ã­ï¼";
  }

  document.getElementById("bot-input").value = "";
}

// æŠ•ç¨¿æ™‚ã®ä»²é–“ã‚­ãƒ£ãƒ©ï¼‹å ã„
function generateForestMessage() {
  const animals = [
    "ã‚¿ãƒŒã‚­ã•ã‚“ï¼šã»ã£ã“ã‚Šã™ã‚‹æŠ•ç¨¿ã ã­ã€œğŸµ",
    "ãƒªã‚¹ãã‚“ï¼šã©ã‚“ãã‚Šè©±ã‹ãªï¼ŸğŸŒ°",
    "ãƒ•ã‚¯ãƒ­ã‚¦ã•ã‚“ï¼šçŸ¥æµã‚ã‚‹ç™ºè¨€ã ğŸ¦‰",
    "ã‚­ãƒ„ãƒã¡ã‚ƒã‚“ï¼šã¡ã‚‡ã£ã¨ã‚¤ã‚¿ã‚ºãƒ©å¿ƒã‚ã‚Šãã†ï¼ŸğŸ¦Š"
  ];
  const fortunes = [
    "ãƒ¢ãƒªãƒ¢ãƒªé‹å‹¢ï¼š90ç‚¹ï¼ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã¯ã©ã‚“ãã‚Šï¼",
    "ãƒ¢ãƒªãƒ¢ãƒªé‹å‹¢ï¼š70ç‚¹ï¼æ·±å‘¼å¸ã—ã¦æ£®ã®é¢¨ã‚’æ„Ÿã˜ã‚ˆã†ã€‚",
    "ãƒ¢ãƒªãƒ¢ãƒªé‹å‹¢ï¼š100ç‚¹ï¼æ£®ã®ç²¾éœŠãŒå‘³æ–¹ã—ã¦ã‚‹ï¼",
    "ãƒ¢ãƒªãƒ¢ãƒªé‹å‹¢ï¼š50ç‚¹â€¦ã§ã‚‚ç¬‘é¡”ã§é‹æ°—ã‚¢ãƒƒãƒ—ğŸŒ"
  ];
  const message =
    animals[Math.floor(Math.random() * animals.length)] +
    "\n" +
    fortunes[Math.floor(Math.random() * fortunes.length)];

  alert(message); // ã¾ãŸã¯HTMLè¦ç´ ã«è¡¨ç¤ºã—ã¦ã‚‚OK
}
generateForestMessage();
